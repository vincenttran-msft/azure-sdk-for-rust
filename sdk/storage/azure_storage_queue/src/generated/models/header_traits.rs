// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{
    ListOfPeekedMessage, ListOfReceivedMessage, ListOfSentMessage, ListOfSignedIdentifier,
    ListQueuesResponse, QueueClientClearResult, QueueClientCreateResult,
    QueueClientDeleteMessageResult, QueueClientDeleteResult, QueueClientGetMetadataResult,
    QueueClientSetAccessPolicyResult, QueueClientSetMetadataResult, QueueClientUpdateResult,
    QueueServiceStats, UserDelegationKey,
};
use azure_core::{
    http::{
        headers::{HeaderName, Headers},
        NoFormat, Response, XmlFormat,
    },
    time::{parse_rfc7231, OffsetDateTime},
    Result,
};
use std::collections::HashMap;

const APPROXIMATE_MESSAGES_COUNT: HeaderName =
    HeaderName::from_static("x-ms-approximate-messages-count");
const DATE: HeaderName = HeaderName::from_static("date");
const META: &str = "x-ms-meta-";
const POPRECEIPT: HeaderName = HeaderName::from_static("x-ms-popreceipt");
const TIME_NEXT_VISIBLE: HeaderName = HeaderName::from_static("x-ms-time-next-visible");

/// Provides access to typed response headers for `QueueClient::peek_messages()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{ListOfPeekedMessage, ListOfPeekedMessageHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<ListOfPeekedMessage, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait ListOfPeekedMessageHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl ListOfPeekedMessageHeaders for Response<ListOfPeekedMessage, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::receive_messages()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{ListOfReceivedMessage, ListOfReceivedMessageHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<ListOfReceivedMessage, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait ListOfReceivedMessageHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl ListOfReceivedMessageHeaders for Response<ListOfReceivedMessage, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::send_message()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{ListOfSentMessage, ListOfSentMessageHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<ListOfSentMessage, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait ListOfSentMessageHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl ListOfSentMessageHeaders for Response<ListOfSentMessage, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::get_access_policy()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{ListOfSignedIdentifier, ListOfSignedIdentifierHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<ListOfSignedIdentifier, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait ListOfSignedIdentifierHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl ListOfSignedIdentifierHeaders for Response<ListOfSignedIdentifier, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueServiceClient::list_queues()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{ListQueuesResponse, ListQueuesResponseHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<ListQueuesResponse, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait ListQueuesResponseHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl ListQueuesResponseHeaders for Response<ListQueuesResponse, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::clear()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientClearResult, QueueClientClearResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientClearResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientClearResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientClearResultHeaders for Response<QueueClientClearResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::create()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientCreateResult, QueueClientCreateResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientCreateResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientCreateResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientCreateResultHeaders for Response<QueueClientCreateResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::delete_message()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientDeleteMessageResult, QueueClientDeleteMessageResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientDeleteMessageResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientDeleteMessageResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientDeleteMessageResultHeaders for Response<QueueClientDeleteMessageResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::delete()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientDeleteResult, QueueClientDeleteResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientDeleteResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientDeleteResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientDeleteResultHeaders for Response<QueueClientDeleteResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::get_metadata()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientGetMetadataResult, QueueClientGetMetadataResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientGetMetadataResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     if let Some(approximate_messages_count) = response.approximate_messages_count()? {
///         println!("x-ms-approximate-messages-count: {:?}", approximate_messages_count);
///     }
///     println!("x-ms-meta: {:?}", response.metadata()?);
///     Ok(())
/// }
/// ```
pub trait QueueClientGetMetadataResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
    fn approximate_messages_count(&self) -> Result<Option<i64>>;
    fn metadata(&self) -> Result<HashMap<String, String>>;
}

impl QueueClientGetMetadataResultHeaders for Response<QueueClientGetMetadataResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }

    /// The approximate number of messages in the queue. This number is not lower than the actual number of messages in the queue,
    /// but could be higher.
    fn approximate_messages_count(&self) -> Result<Option<i64>> {
        Headers::get_optional_as(self.headers(), &APPROXIMATE_MESSAGES_COUNT)
    }

    /// The metadata headers.
    fn metadata(&self) -> Result<HashMap<String, String>> {
        let mut values = HashMap::new();
        for h in self.headers().iter() {
            let name = h.0.as_str();
            if name.len() > META.len() && name.starts_with(META) {
                values.insert(name[META.len()..].to_owned(), h.1.as_str().to_owned());
            }
        }
        Ok(values)
    }
}

/// Provides access to typed response headers for `QueueClient::set_access_policy()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientSetAccessPolicyResult, QueueClientSetAccessPolicyResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientSetAccessPolicyResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientSetAccessPolicyResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientSetAccessPolicyResultHeaders
    for Response<QueueClientSetAccessPolicyResult, NoFormat>
{
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::set_metadata()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientSetMetadataResult, QueueClientSetMetadataResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientSetMetadataResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientSetMetadataResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientSetMetadataResultHeaders for Response<QueueClientSetMetadataResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueClient::update()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, NoFormat}};
/// use azure_storage_queue::models::{QueueClientUpdateResult, QueueClientUpdateResultHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueClientUpdateResult, NoFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     if let Some(pop_receipt) = response.pop_receipt()? {
///         println!("x-ms-popreceipt: {:?}", pop_receipt);
///     }
///     if let Some(time_next_visible) = response.time_next_visible()? {
///         println!("x-ms-time-next-visible: {:?}", time_next_visible);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueClientUpdateResultHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
    fn pop_receipt(&self) -> Result<Option<String>>;
    fn time_next_visible(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueClientUpdateResultHeaders for Response<QueueClientUpdateResult, NoFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }

    /// The pop receipt of the queue message.
    fn pop_receipt(&self) -> Result<Option<String>> {
        Headers::get_optional_as(self.headers(), &POPRECEIPT)
    }

    /// A UTC date/time value that represents when the message will be visible on the queue.
    fn time_next_visible(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &TIME_NEXT_VISIBLE, |h| {
            parse_rfc7231(h.as_str())
        })
    }
}

/// Provides access to typed response headers for `QueueServiceClient::get_statistics()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{QueueServiceStats, QueueServiceStatsHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<QueueServiceStats, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait QueueServiceStatsHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl QueueServiceStatsHeaders for Response<QueueServiceStats, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

/// Provides access to typed response headers for `QueueServiceClient::get_user_delegation_key()`
///
/// # Examples
///
/// ```no_run
/// use azure_core::{Result, http::{Response, XmlFormat}};
/// use azure_storage_queue::models::{UserDelegationKey, UserDelegationKeyHeaders};
/// async fn example() -> Result<()> {
///     let response: Response<UserDelegationKey, XmlFormat> = unimplemented!();
///     // Access response headers
///     if let Some(date) = response.date()? {
///         println!("date: {:?}", date);
///     }
///     Ok(())
/// }
/// ```
pub trait UserDelegationKeyHeaders: private::Sealed {
    fn date(&self) -> Result<Option<OffsetDateTime>>;
}

impl UserDelegationKeyHeaders for Response<UserDelegationKey, XmlFormat> {
    /// UTC date/time value generated by the service that indicates the time at which the response was initiated
    fn date(&self) -> Result<Option<OffsetDateTime>> {
        Headers::get_optional_with(self.headers(), &DATE, |h| parse_rfc7231(h.as_str()))
    }
}

mod private {
    use super::{
        ListOfPeekedMessage, ListOfReceivedMessage, ListOfSentMessage, ListOfSignedIdentifier,
        ListQueuesResponse, QueueClientClearResult, QueueClientCreateResult,
        QueueClientDeleteMessageResult, QueueClientDeleteResult, QueueClientGetMetadataResult,
        QueueClientSetAccessPolicyResult, QueueClientSetMetadataResult, QueueClientUpdateResult,
        QueueServiceStats, UserDelegationKey,
    };
    use azure_core::http::{NoFormat, Response, XmlFormat};

    pub trait Sealed {}

    impl Sealed for Response<ListOfPeekedMessage, XmlFormat> {}
    impl Sealed for Response<ListOfReceivedMessage, XmlFormat> {}
    impl Sealed for Response<ListOfSentMessage, XmlFormat> {}
    impl Sealed for Response<ListOfSignedIdentifier, XmlFormat> {}
    impl Sealed for Response<ListQueuesResponse, XmlFormat> {}
    impl Sealed for Response<QueueClientClearResult, NoFormat> {}
    impl Sealed for Response<QueueClientCreateResult, NoFormat> {}
    impl Sealed for Response<QueueClientDeleteMessageResult, NoFormat> {}
    impl Sealed for Response<QueueClientDeleteResult, NoFormat> {}
    impl Sealed for Response<QueueClientGetMetadataResult, NoFormat> {}
    impl Sealed for Response<QueueClientSetAccessPolicyResult, NoFormat> {}
    impl Sealed for Response<QueueClientSetMetadataResult, NoFormat> {}
    impl Sealed for Response<QueueClientUpdateResult, NoFormat> {}
    impl Sealed for Response<QueueServiceStats, XmlFormat> {}
    impl Sealed for Response<UserDelegationKey, XmlFormat> {}
}
